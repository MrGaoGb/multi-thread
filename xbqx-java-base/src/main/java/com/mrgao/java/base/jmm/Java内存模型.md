## Java内存模型(JMM)

### 1、概念
1. [ ] >  JMM(Java Memory Model)规定，将所有的变量存储在主内存中，每个线程都有自己的工作内存，
2. [ ] > 线程对变量的操作都从工作内存中进行，当线程把修改后的变量从工作内存同步到主内存后，
3. [ ] > 其他线程才能从主内存中读取到该变量的最新值。

#### 1.1 JMM提供了4个特性：
- 1.可见性
- 2.原子性
- 3.有序性
- 4.线程安全
 
#### 1.2 JMM提供了4个同步机制： 
- 1.volatile
- 2.synchronized
- 3.lock
- 4.atomic

### 2、解决内存的可见性问题
> CPU提供了两种解决方案：总线锁和缓存锁。

- 2.1 总线锁
> 在线程总线加入锁，例如，当不同的CPU内核访问同一个变量时，总线锁会阻止其他CPU核的访问。

- 2.2 缓存锁
> 当一个线程对一个变量进行写操作时，其他线程不能对这个变量进行读操作，直到这个线程对这个变量进行写操作结束。